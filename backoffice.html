<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <link href="style.css" rel="stylesheet">
    <title>Netflix</title>
    <style>
        .submit-button:hover{
            background-color: red;
            border-color: transparent;
        }

        .btn-danger:hover{
            background-color: white;
            border-color: transparent;
        }

        .trash:hover{
            color: red;
        }
    </style>
  </head>
  <body>

    <!-- Navbar -->

    <nav class=" navbar navbar-expand-lg navbar-dark bg-Color ">
        <a href="home.html"><img src="assets/netflix_logo.png" alt="logo" class="navbarLogo"></a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
        
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link active" href="home.html">Home <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">TV Shows</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Movies</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Recently Added</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">MyList</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="./backoffice.html">Form</a>
          </li>        
        </ul>
       <div class="d-flex align-items-center">
        <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
          class="bi bi-search" viewBox="0 0 16 16">
          <path
            d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
        </svg></a>
        <a href="#"><svg xmlns="http://www.w3.org/2000/svg" width="16"
          height="16" fill="currentColor" class="bi bi-bell-fill bell  align-items-center px-30"
          viewBox="0 0 16 16">
          <path
            d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zm.995-14.901a1 1 0 1 0-1.99 0A5.002 5.002 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901z" />
        </svg></a>

            <a href="#" >
              <div class="nav-item dropdown justify-content-end ml-auto nav-link">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button"
                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <img src="assets/avatar.png" alt="" class="avatar">
                </a>
    
                <div  class="dropdown-menu userDropdown" aria-labelledby="navbarDropdownMenuLink">
                  <a class="dropdown-item p-0" href="#">
                    <a href="profile.html" class="addUser" style="text-decoration:none;">Kids</a><img class="kidsIcon ml-5" src="assets/kids_icon.png" alt="kidsIcon">
                  </a>
                  <br>
                  <a style="text-decoration:none;" class="addUser" href="account.html">Add User</a>
                </div>
            </a>
       </div>
      </div>
    </nav>

    <!-- Form -->

    <div class="container">
        <div class="row justify-content-center">
          <div class="col-md-6">
            <h2 class="d-inline-block mt-4 mb-3 text-center text-muted">Adding New Movie </h2>
            <h5 id="todo" class="d-inline-block"></h5>
  
            <form onsubmit="submitForm(event)">
              <div class="form-group text-muted ">
                <label for="name">Movie Name</label>
                <input
                  id="name"
                  type="text"
                  class="form-control"
                  aria-describedby="name"
                  placeholder="Name"
                  required
                />
               
              </div>
              <div class="form-group text-muted">
                <label for="description">Description</label>
                <textarea
                  id="description"
                  type="text"
                  rows="6"
                  class="form-control"
                  aria-describedby="event description"
                  placeholder="Description...."
                  required
                ></textarea>
              </div>
              <div class="form-group text-muted">
                <label for="category">Category</label>
                <input
                  id="category"
                  type="text"
                  class="form-control"
                  aria-describedby="category"
                  placeholder="Category eg: Horror"
                  required
                />
             
              </div>
              <div class="form-group text-muted">
                <label for="webadd">URL</label>
                <input
                  id="webadd"
                  type="text"
                  class="form-control"
                  aria-describedby="webadd"
                  placeholder="https://..."
                  required
                />
                <!-- <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small> -->
              </div>
              <div class="d-flex justify-content-around">
            
                    <button type="submit" class="btn btn-light badge-pill submit-button mt-1">SUBMIT
                        <div
                    id="spinner"
                    class="spinner-border spinner-border-sm d-none"
                    role="status"
                  >
                    <span class="sr-only">Loading...</span>
                  </div>
                    </button>

                <button
                id="delete-btn"
                type="button"
                class="btn btn-danger d-none"
                onclick="deleteData()">
                <ion-icon class="trash" name="trash-outline"></ion-icon>
              </button>
              </div>                         
            </form>
          </div>
        </div>
      </div>

      <span id="alert"></span>

      <script>

          const url = "https://striveschool-api.herokuapp.com/api/movies/"
      
      const submitForm = async function(event){
        const key = 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MGFlNDE0YWNlYWY0ODAwMTVjOTE4NzAiLCJpYXQiOjE2MjIyMDkzNTIsImV4cCI6MTYyMzQxODk1Mn0.2Y6pQr7mBhh-iDxdgL36pX6YZIH3zM05iJueyxH0h8w'
          event.preventDefault()
          const movieData = {
              name : document.getElementById('name').value,
              description: document.getElementById('description').value,
              category: document.getElementById('category').value,
              imageUrl: document.getElementById('webadd').value
          }

          try {
                const response = await fetch(url,{
                method:'POST',
                body: JSON.stringify(movieData),
                headers:{"Authorization": key,
                "Content-Type": "application/json"
                }
            })

            if(response.ok){
                const info = await response.json()
                console.log(info);
            }
            else{
                    if (response.status === 400) {
              throw new Error("Bad request with status 400");
            } else if (response.status === 401) {
              throw new Error("Anauthorized with status 401");
            } else if (response.status === 404) {
              throw new Error("Not found with status 404");
            }
                }
              
          } catch (error) {
              console.log(error);              
          }
      }

      </script>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/ionicons@5.4.0/dist/ionicons.js"></script>
    <!-- <script src="js/script.js"></script> -->
  </body>
</html>